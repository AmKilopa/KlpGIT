# KlpGit

Графический Git из терминала: дерево файлов, диффы, просмотр кода, коммит и пуш в один клик. Запускаешь в папке с репо — открывается веб-интерфейс в браузере.

---

## Установка и запуск

**Установить глобально (из npm):**

```bash
npm install -g klpgit
```

**Запустить в папке с репо:**

```bash
cd путь/к/твоему/репо
klpgit
```

Откроется браузер с интерфейсом. Порт по умолчанию 4219 (если занят — выберется другой, ссылка будет в консоли).

---

## Что это и как устроено

- **Клиент** (папка `client/`) — React-приложение: интерфейс, стили, запросы к API. Собирается в папку `web/`.
- **Сервер** (папка `server/`) — Node.js: раздаёт статику из `web/`, даёт REST API по Git и дереву файлов, WebSocket для обновлений. Запускается из `dist/cli.js`.
- **Mock** — режим без сервера: данные из заглушек в `client/src/mock/`, чтобы верстать и проверять стили без Git и бэкенда.

Подробнее по частям:

| Часть | Описание и детали |
|-------|-------------------|
| **[client/](client/README.md)** | Фронтенд: структура, скрипты, стили, слой API, ссылка на mock. |
| **[server/](server/README.md)** | Бэкенд: структура, API с примерами запросов и ответов, WebSocket, порт. |
| **[client/src/mock/](client/src/mock/README.md)** | Mock-режим: как включить, форматы данных, как править заглушки. |

---

## Откуда запускать

Все команды ниже — **из корня проекта** (там, где лежат `client`, `server`, `package.json`).

---

## Первый запуск

1. Сборка (один раз):
   ```bash
   npm run build
   ```
2. Запуск:
   ```bash
   npm start
   ```
3. В консоли — ссылка (например `http://localhost:4219`), откроется браузер. Если порт 4219 занят, будет выбран другой и написано какой.

Дальше можно заходить в любую папку с Git-репо и запускать там `klpgit` (или `npm start`, если не ставил глобально).

---

## Команды из корня

| Команда | Действие |
|---------|----------|
| `npm run build` | Собрать клиент и сервер (перед первым запуском). |
| `npm start` | Запустить сервер и открыть браузер. |
| `npm run dev` | Режим разработки фронта (в другом окне должен быть запущен сервер). |
| `npm run dev:mock` | Режим разработки **без сервера** — данные из заглушек ([подробнее](client/src/mock/README.md)). |
| `npm run build:client` | Собрать только фронт. |
| `npm run build:server` | Собрать только сервер. |
| `npm run build:mock` | Собрать фронт с заглушками (открыть `web/` статически). |

---

## Структура репозитория (кратко)

```
client/          — фронт, см. client/README.md
server/          — бэкенд, см. server/README.md
web/             — появляется после сборки (результат client)
dist/            — появляется после сборки (результат server), точка входа dist/cli.js
```

---

## Разработка с живым API

1. Терминал 1: `npm start`
2. Терминал 2: `npm run dev`
3. Редактируешь файлы в `client/src/` — страница обновляется. API отдаётся на порту из консоли (по умолчанию 4219).

---

## Порт

- По умолчанию **4219**. Если занят — выбирается свободный, в консоли пишется какой.
- Свой порт: `KLPGIT_PORT=3000 npm start` (в PowerShell: `$env:KLPGIT_PORT=3000; npm start`).

---

## Если не работает

- Не стартует — делал ли `npm run build` перед первым `npm start`?
- Другой порт — открывай ссылку из консоли.
- Mock — из корня: `npm run dev:mock`.

---

## Лицензия

MIT
